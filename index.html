<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Code Foo :: Intro to Ruby on Rails</title>

		<meta name="description" content="A presentation for IGN's Code Foo program on Ruby on Rails">
		<meta name="author" content="Ryan Sullivan">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>

		<link rel="stylesheet" href="css/reset.css">
		<link rel="stylesheet" href="css/main.css">
		<link rel="stylesheet" href="css/ign.css">
		<link rel="stylesheet" href="css/print.css" type="text/css" media="print">

		<link rel="stylesheet" href="lib/solarized_light.css">
	</head>

	<body>

		<div class="reveal">

			<!-- Used to fade in a background when a specific slide state is reached -->
			<div class="state-background"></div>

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h4 class="red"><img class="logo" src="assets/images/logo.png" /> Code Foo</h4>
					<h1>Introduction to Ruby on Rails</h1>
				</section>

				<section>
					<section>
						<h1>Gems</h1>
						<h2>The ruby packages</h2>
					</section>
					<section>
						<h2><a href="http://rubygems.org/" target="_blank">RubyGems.org</a></h2>
						<img src="assets/images/rubygems.png">
					</section>
					<section>
						<h2><a href="https://rvm.io/" target="_blank">RVM</a></h2>
						<h2>Ruby Version Manager</h2>
						<pre>
							<code class="no-highlight" contenteditable>$ rvm use --install 1.9.3
$<span class="fragment"> rvm current</span>
<span class="fragment">ruby-1.9.3-p194
$</span><span class="fragment"> rvm gemdir</span>
<span class="fragment">/Users/ryan/.rvm/gems/ruby-1.9.3-p194</span></code>
						</pre>
					</section>
					<section>
						<h2>RVM: Gemsets</h2>
						<pre>
							<code class="no-highlight" contenteditable>$ rvm use --install --create 1.9.3@code-foo
$<span class="fragment"> rvm current</span>
<span class="fragment">ruby-1.9.3-p194@code-foo
$</span><span class="fragment"> rvm gemdir</span>
<span class="fragment">/Users/ryan/.rvm/gems/ruby-1.9.3-p194@code-foo</span></code>
						</pre>
					</section>
					<section>
						<h2>.rvmrc</h2>
					</section>
					<section>
						<h2>Bundler</h2>
						<p>Gemfile:</p>
						<pre>
							<code contenteditable>source 'https://rubygems.org'

gem 'faraday', '~> 0.8.0'
gem 'rails', '~> 3.2.3'

# Gems used only for assets, not required in production
group :assets do
	gem 'coffee-rails', '~> 3.2.1'
	gem 'jquery-rails', '~> 2.0.1'
	gem 'sass-rails',	 '~> 3.2.3'

	# See https://github.com/sstephenson/execjs#readme for more supported runtimes
	gem 'therubyracer', '~> 0.10.0'

	gem 'uglifier', '>= 1.0.3'
end

group :test, :development do
	gem 'debugger'
	gem 'rspec-rails', '~> 2.10.0'
	gem 'webmock', '~> 1.8.5', :require => false
end</code>
						</pre>
						<small><p class="fragment">Running 'bundle install' will install all gems in the Gemfile, and create a Gemfile.lock that contains the specific versions installed</p></small>
					</section>
					<section>
						<h2>Bundler</h2>
						<p>Commands you should know:</p>
						<ul>
							<li>bundle install - installs all the gems in your Gemfile or Gemfile.lock</li>
							<li>bundle update [GEM_NAME] - update the gems, be careful running this as it updates all</li>
							<li>bundle exec COMMAND - executes the command within the context of the bundled gems</li>
							<li>bundle outdated - new in version 1.1, shows you which gems are out of date, and what the latest version is</li>
						</ul>
					</section>
				</section>

				<section>
					<section>
						<h1>TDD</h1>
						<h2>
							<span class="red">Red</span>
							<span style="color: green;">Green</span>
							<span>Refactor</span>
						</h2>
					</section>
					<section>
						<h2>RSpec</h2>
						<pre>
							<code contenteditable>describe '#foo'
	it 'returns bar' end
		hello.should eq('bar')
	end
end</code>
						</pre>
						<pre class="fragment">
							<code contenteditable>def foo
	'bar'
end</code>
						</pre>
					</section>
				</section>

				<section>
					<section>
						<img src="assets/images/rails.png">
					</section>
					<section>
						<h2>MVC Framework</h2>
						<p>Model | View | Controller</p>
						<img src="assets/images/mvc_schematic.png">
					</section>
					<section>
						<h2>Creating a New Rails Project</h2>
						<ol>
							<li>
								Install Rails<br>
								<pre><code contenteditable>$ gem install rails</code></pre>
							</li>
							<li class="fragment">
								Create a Project<br>
								<pre><code contenteditable>$ rails new code-foo</code></pre>
							</li>
						</ol>
					</section>
					<section>
						<h2>Structure of a Rails Project</h2>
						<small>
							<ul>
								<li>app/ - your application code</li>
								<li>config/</li>
								<li>config.ru</li>
								<li>db/ - your database schema and database migrations</li>
								<li>doc/</li>
								<li>Gemfile, Gemfile.lock - your bundler configs</li>
								<li>lib/ - extended modules for your application</li>
								<li>log/</li>
								<li>public/ - served "as is", contains static files, and compiled assets</li>
								<li>Rakefile - contains and loads rake tasks, should add new tasks in lib/tasks</li>
								<li>README.rdoc</li>
								<li>script/ - contains various scripts related to your application</li>
								<li>test/ - default test directory, use spec/ if using RSpec</li>
								<li>tmp/</li>
								<li>vendor/ - a place for all third-party code, mostly handled through gems now</li>
							</ul>
						</small>
					</section>

					<section>
						<h2>Starting your Application Server</h2>
						<pre><code contenteditable>$ rails server</code></pre>
						You can now view your application by going to localhost:3000 in a browser
					</section>

					<section>
						<h2>Generating a Resource</h2>
						<pre><code contenteditable>$ rails generate resource foo</code></pre>
						<ul class="fragment">
							<li>create_foo database migration</li>
							<li>foo model and associated test files</li>
							<li>foos controller and associated test files</li>
							<li>foos views directory, but no view files</li>
							<li>foos helper and associate test files</li>
							<li>foos assets (JS and CSS)</li>
							<li>adds 'resources :foos' to your config/routes.rb</li>
						</ul>
					</section>
				</section>

				<section>
					<section>
						<h1>Models</h1>
						Model your data
					</section>
					<section>
						<h2>Validation</h2>
					</section>
				</section>

				<section>
					<section>
						<h1>Controllers</h1>
						<p>Receives and responds to HTTP requests</p>
						<img src="assets/images/mvc_schematic.png">
					</section>
					<section>
						<h2>Routing</h2>
						<p>if a article goes to '/articles/12' in their browser</p>
						<div class="fragment">
							<p>config/routes.rb</p>
							<pre><code contenteditable>match "/articles/:id" => "articles#show"</code></pre>
						</div>
					</section>
					<section>
						<h2>Actions</h2>
						<p>app/controllers/articles_controller.rb</p>
						<pre><code>class ArticlesController < ApplicationController
	def show
		@article = Article.find(params[:id])
	end
end</code></pre>
						<ul>
							<li class="fragment">calls the show action</li>
							<li class="fragment">the show action finds the article</li>
							<li class="fragment">renders the app/views/articles/show.html.erb view</li>
						</ul>
					</section>
					<section>
						<h2>Params</h2>
						<p>all url parameters will be in a params hash</p>
						<div class="fragment">
							<p>config/routes.rb</p>
							<pre><code contenteditable>match "/articles/:id" => "articles#show"</code></pre>
						</div>
						<div class="fragment">
							<p>/articles/15?foo=bar</p>
							<pre><code>{ id: 15, foo: 'bar' }</code></pre>
						</div>
					</section>
					<section>
						<h2>Instance Variables</h2>
						<p>app/controllers/articles_controller.rb</p>
						<pre><code>class ArticlesController < ApplicationController
	def show
		@article = Article.find(params[:id])
	end
end</code></pre>
						<p class="fragment">
							@article is an instance variable. You can use it in other method within the same request cycle, or within the view.
						</p>
					</section>
					<section>
						<h2>Rendering A Response</h2>
						Defaults to rendering 'app/views/articles/show.html.erb'
						<ul>
							<li class="fragment">render nothing<br>
								<pre><code>render nothing: true</code></pre>
							</li>
							<li class="fragment">render another action's view<br>
								<pre><code>render 'edit'</code></pre>
							</li>
							<li class="fragment">render another controller and action's view<br>
								<pre><code>render layout: 'reviews/edit'</code></pre>
							</li>
						</ul>
					</section>
					<section>
						<h2>Redirecting</h2>
						<p>You can redirect to another route in your app by calling 'redirect_to'</p>
						<pre><code>redirect_to articles_path</code></pre>
					</section>
					<section>
						<h2>Responding to specific formats</h2>
						<p>articles_controller.rb</p>
						<pre><code class="ruby">class ArticlesController < ApplicationController
	def index
		@articles = Article.all
		respond_to do |format|
			format.html # index.html.erb
			format.xml	{ render :xml => @articles}
			format.json { render :json => @articles}
		end
	end
end</code></pre>
					</section>
					<section>
						<h2>Filters</h2>
						<p>Before Filters</p>
						<pre><code>class ApplicationController < ActionController::Base
	before_filter :require_login

	private

	def require_login
		unless logged_in?
			flash[:error] = "You must be logged in to access this section"
			redirect_to new_login_url # halts request cycle
		end
	end

	def logged_in?
		!!current_user
	end
end</code></pre>
						<p class="fragment">Around Filters, After Filters</p>
						<div class="fragment">
							<p>Skipping Filters</p>
								<pre><code class="ruby">class ArticlesController < ApplicationController
	skip_before_filter :require_login, :only => [:new, :create]
end</code></pre>
						</div>
					</section>
					<section>
						<h2>Application Controller</h2>
						<p>The controller all other controllers should inherit from</p>
						<pre><code>class ApplicationController < ActionController::Base
	def get_user
		User.find(session[:user_id])
	end
end</code></pre>
						<div class="fragment">
						<p>articles_controller.rb</p>
							<pre><code class="ruby">class ArticlesController < ApplicationController
	def create
		@article = Article.new(params[:article])
		@article.user = get_user
		...
	end
end</code></pre>
						</div>
					</section>
				</section>

				<section>
					<section>
						<h1>Views</h1>
						The HTML, JSON, or XML representation of your data
					</section>
					<section>
						<h2>ERB: Ruby in Your HTML</h2>
						<p>Controller:</p>
						<pre><code contenteditable>def index
	@articles = [ { name: 'foo' }, { name: 'bar' } ]
end</code></pre>
						<p>View:</p>
						<pre><code contenteditable>&lt;ul&gt;
	&lt;% @articles.each do |article| %&gt;
		&lt;li&gt;&lt;%= article.name %&gt;&lt;/li&gt;
	&lt;% end %&gt;
&lt;/ul&gt;</code></pre>
						<div class="fragment">
							<p>Result:</p>
							<pre><code contenteditable>&lt;ul&gt;
	&lt;li&gt;foo&lt;/li&gt;
	&lt;li&gt;bar&lt;/li&gt;
&lt;/ul&gt;</code></pre>
						</div>
					</section>
					<section>
						<h2>Layouts</h2>
						<p>Global templates for your views</p>
						<ul>
							<li>found in app/views/layouts</li>
							<li>default layout is application.html.erb</li>
							<li>
								can define the layout for a controller response by doing:<br>
								<pre><code contenteditable>class PopupController < ApplicationController
	layout :popup</code></pre>
								or<br>
								<pre><code contenteditable>def index
	...
	render :layout => 'popup'</code></pre>
							</li>
							<li>
								should have yield to an unnamed block<br>
								<pre><code contenteditable>&lt%= yield %&gt;</code></pre>
							</li>
						</ul>
					</section>
					<section>
						<h2>content_for and yield</h2>
						<p>yield in your layouts</p>
						<pre><code contenteditable>&lt;html&gt;
	&lt;head&gt;
		&lt;%= yield :head %&gt;
	&lt;/head&gt;
	&lt;body&gt;
		&lt;%= yield %&gt;
	&lt;/body&gt;
&lt;/html&gt;</code></pre>
						<div class="fragment">
							<p>use content_for in your views</p>
							<pre><code>&lt;% content_for :head do %&gt;
	&lt;title&gt;A simple page&lt;/title&gt;
&lt;% end %&gt;

&lt;p&gt;Hello, Rails!&lt;/p&gt;</code></pre>
						</div>
						<div class="fragment">
							<p>result:</p>
							<pre><code>&lt;html&gt;
	&lt;head&gt;
		&lt;title&gt;A simple page&lt;/title&gt;
	&lt;/head&gt;
	&lt;body&gt;
		&lt;p&gt;Hello, Rails!&lt;/p&gt;
	&lt;/body&gt;
&lt;/html&gt;</code></pre>
						</div>
					</section>
					<section>
						<h2>Partials</h2>
						<p>Break your view up into chunks</p>
						<p>index.html.erb</p>
						<pre><code contenteditable>&lt;ul&gt;
	&lt;% @articles.each do |article| %&gt;
		&lt;li&gt;
			&lt;%= article.name %&gt;&lt;br&gt;
			&lt;%= article.description %&gt;
		&lt;/li&gt;
	&lt;% end %&gt;
&lt;/ul&gt;</code></pre>
						<p>show.html.erb</p>
						<pre><code contenteditable>&lt;div&gt;
	&lt;%= @article.name %&gt;&lt;br&gt;
	&lt;%= @article.description %&gt;
&lt;/div&gt; </code></pre>
					</section>
					<section>
						<p>_article.html.erb</p>
						<pre><code contenteditable>&lt;%= article.name %&gt;&lt;br&gt;
&lt;%= article.description %&gt;</code></pre>
						<div class="fragment">
							<p>index.html.erb</p>
							<pre><code contenteditable>&lt;ul&gt;
	&lt;% @articles.each do |article| %&gt;
		&lt;li&gt;
			&lt;%= render partial: 'article', object: article %&gt;
		&lt;/li&gt;
	&lt;% end %&gt;
&lt;/ul&gt;</code></pre>
							<p>show.html.erb</p>
							<pre><code contenteditable>&lt;ul&gt;
	&lt;%= render partial: 'article', object: @article %&gt;
&lt;/ul&gt;</code></pre>
						</div>
						<div class="fragment">
							<p>or</p>
							<pre><code contenteditable>&lt;ul&gt;
	&lt;%= render partial: 'article', locals: { article: @article } %&gt;
&lt;/ul&gt;</code></pre>
						</div>
					</section>
					<section>
						<h2>HAML</h2>
						<p>index.html.haml</p>
						<pre><code contenteditable>%ul#article-list.articles
	- @objects.each do |object|
		%li.article= render partial: 'article', object: object

.right.column
	= @article.name</code></pre>
						<div class="fragment">
							<p>Result</p>
							<pre><code contenteditable>&lt;ul id=&quot;article-list&quot; class=&quot;articles&quot;&gt;
	&lt;li class=&quot;article&quot;&gt;foo&lt;/li&gt;
	&lt;li class=&quot;article&quot;&gt;bar&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;right column&quot;&gt;
	Ryan
&lt;/div&gt;</code></pre>
						</div>
					</section>
				</section>

				<section>
					<section>
						<h1>Helpers</h1>
						Reusable, testable view logic
					</section>
					<section>
						<h2>ActionView::Helpers</h2>
						<ul>
							<li>AssetTagHelper</li>
							<li>DateHelper</li>
							<li>FormHelper</li>
							<li>JavaScriptHelper</li>
							<li>TagHelper</li>
							<li>TextHelper</li>
							<li>UrlHelper</li>
						</ul>
					</section>
					<section>
						<h2>Custom Helper Methods</h2>
						<p>app/helpers/articles_helper.rb</p>
						<pre><code class="ruby">module ArticlesHelper
	def link_to_article(article, *args)
		url = "http://www.ign.com/images/articles/#{article.metadata.slug}"
		link_to url, url, *args
	end
end</code></pre>
						<p>Usage:</p>
						<pre><code class="erb"><%= link_to_article @article, class: 'article-link' %></code></pre>
					</section>
					<section>
						<h2>Exposing Controller Methods as Helpers</h2>
						<p>app/controllers/application_controller.rb</p>
						<pre><code class="ruby">class ApplicationController < ActionController::Base
	helper_method :access?

	def access?
		return !!current_user
	end
end
</code></pre>
						<p>Usage:</p>
						<pre><code class="erb ruby"><% if access? %>
	...
<% end %></code></pre>
					</section>
				</section>

				<section>
					<section>
						<h1>Assets</h1>
						JavaScript, CSS, and Images
					</section>
					<section>
						<h2>Sprockets and the Asset Pipeline</h2>
					</section>
					<section>
						<h2>Requiring Files</h2>
					</section>
					<section>
						<h2>Compiling JavaScript and CSS</h2>
					</section>
				</section>

				<section>
					<section>
						<h1>Routes</h1>
						URLs
					</section>
					<section>
						<h2>Resources</h2>
					</section>
					<section>
						<h2>Nested Resources</h2>
					</section>
					<section>
						<h2>Custom Paths</h2>
					</section>
					<section>
						<h2>rake routes</h2>
					</section>
				</section>

				<section>
					<section>
						<h1>Rails at IGN</h1>
						Rails in a Service Oriented World
					</section>
					<section>
						<h2>No ActiveRecord</h2>
					</section>
					<section>
						<h2>Faraday</h2>
					</section>
					<section>
						<h2>WebMock</h2>
					</section>
				</section>

				<section>
					<section>
						<h1>Resources</h1>
						<a href="http://guides.rubyonrails.org/index.html">Rails Guides</a><br>
						<a href="http://ruby.railstutorial.org/ruby-on-rails-tutorial-book">Rails Tutorial</a><br>
						<a href="http://api.rubyonrails.org/">Rails Documentation</a>
					</section>
				</section>
			</div>

			<!-- The navigational controls UI -->
			<aside class="controls">
				<a class="left" href="#">&#x25C4;</a>
				<a class="right" href="#">&#x25BA;</a>
				<a class="up" href="#">&#x25B2;</a>
				<a class="down" href="#">&#x25BC;</a>
			</aside>

			<!-- Displays presentation progress, max value changes via JS to reflect # of slides -->
			<div class="progress"><span></span></div>

		</div>

		<!-- Optional libraries for code syntax highlighting and classList support in IE9 -->
		<script src="lib/highlight.js"></script>
		<script src="lib/classList.js"></script>

		<script src="js/reveal.js"></script>

		<script>
			// Parse the query string into a key/value object
			var query = {};
			location.search.replace( /[A-Z0-9]+?=(\w*)/gi, function(a) {
				query[ a.split( '=' ).shift() ] = a.split( '=' ).pop();
			} );

			// Fires when a slide with data-state=customevent is activated
			Reveal.addEventListener( 'customevent', function() {
				alert( '"customevent" has fired' );
			} );

			// Fires each time a new slide is activated
			Reveal.addEventListener( 'slidechanged', function( event ) {
				// event.previousSlide, event.currentSlide, event.indexh, event.indexv
			} );

			Reveal.initialize({
				// Display controls in the bottom right corner
				controls: true,

				// Display a presentation progress bar
				progress: true,

				// If true; each slide will be pushed to the browser history
				history: true,

				// Loops the presentation, defaults to false
				loop: false,

				// Flags if mouse wheel navigation should be enabled
				mouseWheel: true,

				// Apply a 3D roll to links on hover
				rollingLinks: false,

				// UI style
				theme: query.theme || 'blackout', // default/neon

				// Transition style
				transition: query.transition || 'default' // default/cube/page/concave/linear(2d)
			});

			hljs.tabReplace = '  ';
			hljs.initHighlightingOnLoad();
		</script>

	</body>
</html>
